\question[5]

Consider the following language described in set-builder notation:
%
\begin{align*}
    L = \{w \in \{a, b\}^* \mid \#a(w) = \#b(w)\}
\end{align*}
%
i.e., the set of all strings over the alphabet $\{a, b\}$ with an equal number
of $a$'s and $b$'s.

\begin{parts}
    \part \withpoints{1.5} Produce a context-free grammar \(G\) that generates
    the language \(L\), i.e. \(L(G) = L\). 
    %
    \part \withpoints{1.5} If your grammar is ambiguous, show that it is by
    producing a word demonstrating the ambiguity with two distinct derivations
    or parse trees. If your grammar is unambiguous, argue why. 
    %
    \part \withpoints{2} Prove that the language \(L\) cannot be represented by
    a non-deterministic finite automaton.
\end{parts}

\begin{solutionorbox}[\fill]
    \withpoints{1.5}
    One possible grammar \(G\) is:
    \begin{align*}
        S &::= a~B \mid b~A \mid \epsilon \\
        A &::= SaS \\
        B &::= SbS 
    \end{align*}
    where \(S\) is the set of ``balanced'' strings, \(A\) is the set of strings
    with an extra \(a\) and \(B\) is the set of strings with an extra \(b\).

    \withpoints{1.5}
    The grammar \(G\) above is ambiguous. Consider the string \(aabbab\). It can
    be accepted by \(G\) with the two following distinct parse trees:
    %
    \begin{center}
        \begin{forest}
            [S
                [a]
                [B
                    [S
                        % ab
                        [a]
                        [B
                            [S [\(\epsilon\)]]
                            [b]
                            [S [\(\epsilon\)]]
                        ]
                    ]
                    [b]
                    [S
                        % ab
                        [a]
                        [B
                            [S [\(\epsilon\)]]
                            [b]
                            [S [\(\epsilon\)]]
                        ]
                    ]
                ]
            ]            
        \end{forest}
        \qquad
        \begin{forest}
            [S
                [a]
                [B
                    [S
                        % abba
                        [a]
                        [B
                            [S [\(\epsilon\)]]
                            [b]
                            [S 
                                % ba
                                [b]
                                [A
                                    [S [\(\epsilon\)]]
                                    [a]
                                    [S [\(\epsilon\)]]
                                ]
                            ]
                        ]
                    ]
                    [b]
                    [S [\(\epsilon\)]]
                ]
            ]
        \end{forest}
    \end{center}

    There is an LL(1), and thus deterministic and unambiguous, grammar for the
    language \(L\) as well:

    \begin{align*}
        S &::= a~B~S \mid b~A~S \mid \epsilon \\
        A &::= a \mid b~A~A \\
        B &::= b \mid a~B~B
    \end{align*}

    where \(S\) is the set of ``balanced'' strings, \(A\) is the set of strings
    with an extra \(a\) and \(B\) is the set of strings with an extra \(b\).

    \withpoints{2}
    The language \(L\) is \emph{not} regular. We prove this using the pumping
    lemma. Assume that \(L\) is regular. Then, by the pumping lemma, there
    exists a pumping length \(p\) such that any string \(w \in L\) with
    \(|w| \geq p\) can be decomposed into three parts \(w = xyz\) such that:
    %
    \begin{itemize}
        \item \(|xy| \leq p\),
        \item \(|y| > 0\), and
        \item \(xy^iz \in L\) for all \(i \geq 0\)~.
    \end{itemize}
    %
    Let \(w = a^p b^p\). Then, we can decompose \(w\) into \(x = a^k\), \(y =
    a^m\) and \(z = a^{p-k-m} b^p\) where \(k + m \leq p\) and \(m > 0\). Then,
    \(xy^0z = a^k a^{p-k-m} b^p = a^{p-m} b^p\), must be in \(L\). However, this
    string has less \(a\)'s than \(b\)'s, i.e. \(\#a(xy^0z) \neq \#b(xy^0z)\).
    This is a contradiction, and the word \(w\) cannot be pumped. Thus, the
    language \(L\) cannot be regular, and thus cannot be represented by a
    non-deterministic finite automaton.
    
\end{solutionorbox}

\answerPage
